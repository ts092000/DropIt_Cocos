{"version":3,"sources":["file:///Users/ADMIN/Desktop/DropIt_Cocos/DropIt/DropIt_Cocos/assets/Script/PrefabManager/Block.ts"],"names":["_decorator","Animation","Component","Sprite","tween","UITransform","Vec3","Contants","ccclass","property","Block","indexRow","indexCol","length","setSpriteFrame","spriteFrame","spriteBlock","setLength","uiTransfrom","getComponent","setContentSize","blockUiTransform","node","getLength","fallTo","destination","time","to","position","easing","start","setIndex","row","col","SQUARE_SIZE","WIDTH","HEIGHT","setPosition","getIndex","resetBlock","playAnimation","play"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,M,OAAAA,M;AAAqBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,I,OAAAA,I;;AACzFC,MAAAA,Q;;;;;;;;;OACD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;uBAGjBU,K,WADZF,OAAO,CAAC,OAAD,C,UAMHC,QAAQ,CAACN,MAAD,C,2BANb,MACaO,KADb,SAC2BR,SAD3B,CACqC;AAAA;AAAA;AAAA,eACzBS,QADyB,GACN,CADM;AAAA,eAEzBC,QAFyB,GAEN,CAFM;AAAA,eAGzBC,MAHyB,GAGR,CAHQ;;AAAA;AAAA;;AAQ1BC,QAAAA,cAAc,CAACC,WAAD,EAAiC;AAClD,eAAKC,WAAL,CAAiBD,WAAjB,GAA+BA,WAA/B;AACH;;AAEME,QAAAA,SAAS,CAACJ,MAAD,EAAiB;AAC7B,cAAIK,WAAW,GAAG,KAAKF,WAAL,CAAiBG,YAAjB,CAA8Bd,WAA9B,CAAlB;AACAa,UAAAA,WAAW,CAACE,cAAZ,CAA2B,KAAKP,MAAhC,EAAwC,EAAxC;AAEA,cAAIQ,gBAAgB,GAAG,KAAKC,IAAL,CAAUH,YAAV,CAAuBd,WAAvB,CAAvB;AACAgB,UAAAA,gBAAgB,CAACD,cAAjB,CAAgC,KAAKP,MAArC,EAA6C,EAA7C;AACA,eAAKA,MAAL,GAAcA,MAAd;AACH;;AAEMU,QAAAA,SAAS,GAAW;AACvB,iBAAO,KAAKV,MAAZ;AACH;;AAEMW,QAAAA,MAAM,CAACC,WAAD,EAAoBC,IAApB,EAAwC;AACjDtB,UAAAA,KAAK,CAAC,KAAKkB,IAAN,CAAL,CAAiBK,EAAjB,CAAoBD,IAApB,EAA0B;AAAEE,YAAAA,QAAQ,EAAEH;AAAZ,WAA1B,EAAqD;AAAEI,YAAAA,MAAM,EAAE;AAAV,WAArD,EAA2EC,KAA3E;AACH;;AAEMC,QAAAA,QAAQ,CAACC,GAAD,EAAcC,GAAd,EAA2BP,IAA3B,EAAgD;AAC3D,eAAKf,QAAL,GAAgBqB,GAAhB;AACA,eAAKpB,QAAL,GAAgBqB,GAAhB;AACA,cAAI,CAACP,IAAL,EAAWA,IAAI,GAAG,IAAP;AAEX,cAAIE,QAAQ,GAAG,IAAItB,IAAJ,CAAS,KAAKM,QAAL,GAAgB;AAAA;AAAA,oCAASsB,WAAT,CAAqBC,KAA9C,EAAqD,KAAKxB,QAAL,GAAgB;AAAA;AAAA,oCAASuB,WAAT,CAAqBE,MAA1F,EAAkG,CAAlG,CAAf;;AACA,cAAI,KAAKzB,QAAL,KAAkB,CAAC,CAAvB,EAA0B;AACtB,iBAAKW,IAAL,CAAUe,WAAV,CAAsBT,QAAtB;AACH,WAFD,MAEO;AACH,iBAAKJ,MAAL,CAAYI,QAAZ,EAAsBF,IAAtB;AACH;AACJ;;AAEMY,QAAAA,QAAQ,GAAiC;AAC5C,iBAAO;AAAEN,YAAAA,GAAG,EAAE,KAAKrB,QAAZ;AAAsBsB,YAAAA,GAAG,EAAE,KAAKrB;AAAhC,WAAP;AACH;;AAEM2B,QAAAA,UAAU,GAAS;AACtB,eAAK5B,QAAL,GAAgB,CAAhB;AACA,eAAKC,QAAL,GAAgB,CAAhB;AACA,eAAKC,MAAL,GAAc,CAAd;AACH;;AAEM2B,QAAAA,aAAa,GAAS;AACzB,eAAKlB,IAAL,CAAUH,YAAV,CAAuBlB,SAAvB,EAAkCwC,IAAlC;AACH;;AAtDgC,O","sourcesContent":["import { _decorator, Animation, Component, Node, Sprite, SpriteFrame, tween, UITransform, Vec2, Vec3 } from 'cc';\r\nimport Contants from '../Utils/Constants';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('Block')\r\nexport class Block extends Component {\r\n    private indexRow: number = 0;\r\n    private indexCol: number = 0;\r\n    private length: number = 0;\r\n\r\n    @property(Sprite)\r\n    private spriteBlock: Sprite;\r\n\r\n    public setSpriteFrame(spriteFrame: SpriteFrame): void {\r\n        this.spriteBlock.spriteFrame = spriteFrame;\r\n    }\r\n\r\n    public setLength(length: number) {\r\n        let uiTransfrom = this.spriteBlock.getComponent(UITransform);\r\n        uiTransfrom.setContentSize(37 * length, 37);\r\n\r\n        let blockUiTransform = this.node.getComponent(UITransform);\r\n        blockUiTransform.setContentSize(37 * length, 37);\r\n        this.length = length;\r\n    }\r\n\r\n    public getLength(): number {\r\n        return this.length;\r\n    }\r\n\r\n    public fallTo(destination: Vec3, time: number): void {\r\n        tween(this.node).to(time, { position: destination }, { easing: 'smooth' }).start();\r\n    }\r\n\r\n    public setIndex(row: number, col: number, time?: number): void {\r\n        this.indexRow = row;\r\n        this.indexCol = col;\r\n        if (!time) time = 0.15;\r\n\r\n        let position = new Vec3(this.indexCol * Contants.SQUARE_SIZE.WIDTH, this.indexRow * Contants.SQUARE_SIZE.HEIGHT, 0);\r\n        if (this.indexRow === -1) {\r\n            this.node.setPosition(position);\r\n        } else {\r\n            this.fallTo(position, time);\r\n        }\r\n    }\r\n\r\n    public getIndex(): { row: number, col: number } {\r\n        return { row: this.indexRow, col: this.indexCol };\r\n    }\r\n\r\n    public resetBlock(): void {\r\n        this.indexRow = 0;\r\n        this.indexCol = 0;\r\n        this.length = 0;\r\n    }\r\n\r\n    public playAnimation(): void {\r\n        this.node.getComponent(Animation).play();\r\n    }\r\n}\r\n\r\n"]}