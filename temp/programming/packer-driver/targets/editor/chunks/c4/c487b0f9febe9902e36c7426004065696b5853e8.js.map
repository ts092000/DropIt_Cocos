{"version":3,"sources":["file:///Users/ADMIN/Desktop/DropIt_Cocos/DropIt/DropIt_Cocos/assets/Script/GameManager/PoolManager.ts"],"names":["_decorator","Component","instantiate","Node","NodePool","Prefab","Block","ccclass","property","PoolManager","type","tooltip","poolBlock","poolClear","poolAnim","start","initPoolBlock","initPoolClear","i","element","prefabBlock","put","getBlock","size","get","removeBlock","block","getComponent","resetBlock","animationClearNode","getClearNode","putClearNode","clearNode","getAnimationCombo","prefabAnimation","putAnimation","node"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,M,OAAAA,M;;AACpDC,MAAAA,K,iBAAAA,K;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;6BAGjBS,W,WADZF,OAAO,CAAC,aAAD,C,UAEHC,QAAQ,CAAC;AACNE,QAAAA,IAAI,EAAEL,MADA;AAENM,QAAAA,OAAO,EAAE;AAFH,OAAD,C,UAMRH,QAAQ,CAAC;AACNE,QAAAA,IAAI,EAAEP,IADA;AAENQ,QAAAA,OAAO,EAAE;AAFH,OAAD,C,UAMRH,QAAQ,CAACH,MAAD,C,2BAdb,MACaI,WADb,SACiCR,SADjC,CAC2C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAgB/BW,SAhB+B,GAgBT,IAAIR,QAAJ,EAhBS;AAAA,eAiB/BS,SAjB+B,GAiBT,IAAIT,QAAJ,EAjBS;AAAA,eAkB/BU,QAlB+B,GAkBV,IAAIV,QAAJ,EAlBU;AAAA;;AAoB7BW,QAAAA,KAAK,GAAS;AACpB,eAAKC,aAAL;AACA,eAAKC,aAAL;AACH;;AAEOD,QAAAA,aAAa,GAAS;AAC1B,eAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AACzB,gBAAIC,OAAO,GAAGjB,WAAW,CAAC,KAAKkB,WAAN,CAAzB;AACA,iBAAKR,SAAL,CAAeS,GAAf,CAAmBF,OAAnB;AACH;AACJ;;AAEMG,QAAAA,QAAQ,GAAS;AACpB,cAAIH,OAAO,GAAG,KAAKP,SAAL,CAAeW,IAAf,KAAwB,CAAxB,GAA4B,KAAKX,SAAL,CAAeY,GAAf,EAA5B,GAAmDtB,WAAW,CAAC,KAAKkB,WAAN,CAA5E;AACA,iBAAOD,OAAP;AACH;;AAEMM,QAAAA,WAAW,CAACC,KAAD,EAAoB;AAClCA,UAAAA,KAAK,CAACC,YAAN;AAAA;AAAA,8BAA0BC,UAA1B;AACA,eAAKhB,SAAL,CAAeS,GAAf,CAAmBK,KAAnB;AACH;;AAGOT,QAAAA,aAAa,GAAS;AAC1B,iBAAO,KAAKJ,SAAL,CAAeU,IAAf,KAAwB,EAA/B,EAAmC,KAAKV,SAAL,CAAeQ,GAAf,CAAmBnB,WAAW,CAAC,KAAK2B,kBAAN,CAA9B;AACtC;;AAEMC,QAAAA,YAAY,GAAS;AACxB,iBAAO,KAAKjB,SAAL,CAAeU,IAAf,KAAwB,CAAxB,GAA4B,KAAKV,SAAL,CAAeW,GAAf,EAA5B,GAAmDtB,WAAW,CAAC,KAAK2B,kBAAN,CAArE;AACH;;AAEME,QAAAA,YAAY,CAACC,SAAD,EAAwB;AACvC,eAAKnB,SAAL,CAAeQ,GAAf,CAAmBW,SAAnB;AACH;;AAEMC,QAAAA,iBAAiB,GAAS;AAC7B,iBAAO,KAAKnB,QAAL,CAAcS,IAAd,KAAuB,CAAvB,GAA2B,KAAKT,QAAL,CAAcU,GAAd,EAA3B,GAAiDtB,WAAW,CAAC,KAAKgC,eAAN,CAAnE;AACH;;AAEMC,QAAAA,YAAY,CAACC,IAAD,EAAmB;AAClC,eAAKtB,QAAL,CAAcO,GAAd,CAAkBe,IAAlB;AACH;;AA7DsC,O","sourcesContent":["import { _decorator, Component, instantiate, Node, NodePool, Prefab } from 'cc';\r\nimport { Block } from '../PrefabManager/Block';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PoolManager')\r\nexport class PoolManager extends Component {\r\n    @property({\r\n        type: Prefab,\r\n        tooltip: 'Prefab block'\r\n    })\r\n    private prefabBlock: Prefab;\r\n\r\n    @property({\r\n        type: Node,\r\n        tooltip: 'Node animation clear'\r\n    })\r\n    private animationClearNode: Node;\r\n\r\n    @property(Prefab)\r\n    private prefabAnimation: Prefab;\r\n\r\n    private poolBlock: NodePool = new NodePool();\r\n    private poolClear: NodePool = new NodePool();\r\n    private poolAnim: NodePool = new NodePool();\r\n\r\n    protected start(): void {\r\n        this.initPoolBlock();\r\n        this.initPoolClear();\r\n    }\r\n\r\n    private initPoolBlock(): void {\r\n        for (let i = 0; i < 20; i++) {\r\n            let element = instantiate(this.prefabBlock);\r\n            this.poolBlock.put(element);\r\n        }\r\n    }\r\n\r\n    public getBlock(): Node {\r\n        let element = this.poolBlock.size() > 0 ? this.poolBlock.get() : instantiate(this.prefabBlock);\r\n        return element;\r\n    }\r\n\r\n    public removeBlock(block: Node): void {\r\n        block.getComponent(Block).resetBlock();\r\n        this.poolBlock.put(block);\r\n    }\r\n\r\n\r\n    private initPoolClear(): void {\r\n        while (this.poolClear.size() < 10) this.poolClear.put(instantiate(this.animationClearNode));\r\n    }\r\n\r\n    public getClearNode(): Node {\r\n        return this.poolClear.size() > 0 ? this.poolClear.get() : instantiate(this.animationClearNode);\r\n    }\r\n\r\n    public putClearNode(clearNode: Node): void {\r\n        this.poolClear.put(clearNode);\r\n    }\r\n\r\n    public getAnimationCombo(): Node {\r\n        return this.poolAnim.size() > 0 ? this.poolAnim.get() : instantiate(this.prefabAnimation);\r\n    }\r\n\r\n    public putAnimation(node: Node): void {\r\n        this.poolAnim.put(node);\r\n    }\r\n}\r\n\r\n"]}